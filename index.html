<!doctype html>
<html ng-app="geolocation">
  <head>
    <meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<script type="text/javascript"
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyA53_haHavNXGFRhZOTxV5c0nOdnn6T5Ig">
	   function $i(id) {return document.getElementById(id);}
    function $n(id) {return document.getElementsByName(name);}
    function $c(id) {return document.getElementsByClass(className);}
    function $t(id) {return document.getElementsByClass(tagName);}
	  var watchID;
    window.onload=function() {
      if (!navigator.geolocation) {
	      alert("此瀏覽器不支援地理定位功能!");
		  return;
		  }
      var geolocation=navigator.geolocation; //取得 Geolocation 物件
	  $i("start").onclick=function() {
        var option={
              enableAcuracy:false,
              maximumAge:1000,
              timeout:60000
              };
        watchID=geolocation.watchPosition(successCallback,
                                          errorCallback,
                                          option
                                          );
		$i("start").value="位置監視中"; //變更按鈕顯示
        }; //end of onclick
	  $i("stop").onclick=function() {
        geolocation.clearWatch(watchID); //停止監視
        $i("start").value="開始"; //恢復按鈕顯示
        }; //end of onclick
	  }; //end of window.onload
    function successCallback(position) {
      var arr=new Array();
      for (var i in position.coords) {
           arr.push(i + "=" + position.coords[i]);
           }
      arr.push(position.timestamp);
	  $i("output").innerHTML=arr.join("<br>");
      }
    function errorCallback(error) {
      var errorTypes={
            0:"不明原因錯誤",
            1:"使用者拒絕提供位置資訊",
            2:"無法取得位置資訊",
            3:"位置查詢逾時"
            };      
	  var error="error code=" + error.code + "\n" + error.message + "\n" +
	            errorTypes[error.code];
      alert(error); 
	  }
    </script>
	<link rel="stylesheet" href="css/bootstrap.min.css">
	<link rel="stylesheet" href="css/jquery-ui.css">
	<script src="js/jquery.min.js"></script>
	<script src="js/bootstrap.min.js"></script>
	<script src="js/jquery-ui.js"></script>
	<script src="js/angular.min.js"></script>
	<script src="js/angular-route.js"></script>
	<script src="js/angular-ui-router.js"></script>
	<script src="js/angular-modal-service.js"></script>
	<style>
	  body{
	    padding-top: 80px;
	  }
	</style>
  </head>
  <script src="angular/module/geolocation.module.js"></script>
  <script src="angular/controller/geolocation.controller.js"></script>
  
  <body >
      <div ng-controller="geolocationController as vm">
	   <input type="button" id="start" value="開始">
	  <input type="button" id="stop" value="停止">
	  <p id="output"></p>
	     <p ng-repeat="address in vm.data">{{address.stoAdd}}</p>
	  </div>
  </body>
</html>